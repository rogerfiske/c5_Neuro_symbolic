# Project Memory - C5 Neuro-Symbolic Predictive Maintenance

> **Purpose**: Quick reference for key facts, decisions, and context across sessions
> **Updated**: 2026-01-22
> **Format**: Concise, searchable, assistant-friendly

---

## User Profile

**Name**: y
**Role**: Research project lead (NOT a trained programmer or data scientist)
**Technical Background**: Will depend on AI agents and team members for heavy lifting (code implementation, debugging, technical execution)
**Skill Level**: Domain expertise, research direction, strategic decisions
**Environment**: Windows 11, local PC + RunPod H200 access
**Preferences**: Reproducibility-focused, interpretability-driven, values evidence over complexity
**Working Style**: Guides research direction; agents implement technical details

---

## Project Identity

**Name**: C5 Neuro-Symbolic Predictive Maintenance
**Code**: c5_neuro_symbolic
**Type**: ML research project (neuro-symbolic AI)
**Domain**: Predictive maintenance for 5-machine production line
**Phase**: Agent creation complete ✅, research starting ⏳

**Git Repository**:
- **URL**: https://github.com/rogerfiske/c5_Neuro_symbolic.git
- **Branch**: main
- **Status**: Local repo created, initial push pending (2026-01-23)
- **Setup Commands**:
  ```bash
  git remote add origin https://github.com/rogerfiske/c5_Neuro_symbolic.git
  git branch -M main
  git push -u origin main
  ```

---

## Core Problem

**Input**: Historical daily part shipments (11,685 records, 1992-2026)
**Output**: Next-day staged parts pool (size K=20-27)
**Constraint**: Exactly 5 unique parts needed per day (from pool of 39)
**Objective**: Maximize Good-or-better rate (≥4/5 in pool) while minimizing K and maintaining stability

**Tier Definitions**:
- 5/5 in pool = Excellent
- 4/5 in pool = Good
- ≤3/5 in pool = Unacceptable

---

## Key Decisions Made

### Agent Architecture (2026-01-22)
- **Agent Name**: Synapse (captures neuro-symbolic bridge)
- **Agent Type**: Expert (not Simple or Module)
- **Rationale**: 8 complex workflows + reference materials exceed single YAML capacity
- **Sidecar**: Yes (12 files: 4 reference docs + 8 workflows)
- **Module**: stand-alone (project-specific, not extending BMM/BMGD/CIS)

### Technical Approach (2026-01-22)
- **Two-Tier Architecture**: Neural (Tier A) + Symbolic (Tier B)
- **Neural**: Baseline → Logistic → GRU/LSTM → Transformer (if justified)
- **Symbolic**: Rule mining (Apriori, ILP) + constraint enforcement + stability policies
- **Integration**: Score adjustment + hard constraints + Jaccard penalty for churn

### Computational Strategy (2026-01-22)
- **Local PC**: Feature engineering, baselines, small prototypes (<1M params)
- **RunPod H200**: Large transformers (11K+ sequence), sweeps (>50 configs), graph embeddings (>10K nodes)
- **Decision Heuristics**: Parameter count, training time, batch size, memory footprint

### Code Quality Standards (2026-01-22)
- Early stopping (configurable max iterations)
- Progress monitoring (terminal output for runs >10 min)
- Infinite loop detection (hard counters + timeouts)
- Reproducibility (seeds, configs, git hashes)
- Exception handling (informative errors)

---

## Critical Files

### Dataset
- **Path**: `data/raw/CA5_date.csv`
- **Records**: 11,685
- **Date Range**: 1992-02-04 to 2026-01-21
- **Format**: date, m_1, m_2, m_3, m_4, m_5
- **Invariants**: 5 unique parts per day, IDs 1-39, no duplicates

### Documentation
- **PRD**: `docs/prd_neurosymbolic_ai_ca5_v1_1.md` (enhanced with code quality + GPU sections)
- **Agent Card**: `docs/bmad_agent_card_neurosymbolic_pm_ca5.md`
- **Handoff Doc**: `docs/handoff_synapse_agent_to_builder.md`
- **PC Specs**: `docs/pc_specs.md`

### Agent Files
- **Agent YAML**: `_bmad-output/bmb-creations/synapse/synapse.agent.yaml`
- **Sidecar**: `_bmad-output/bmb-creations/synapse/synapse-sidecar/` (12 files)

### Session Logs
- **Summary**: `Session_Summary_YYYY-MM-DD.md` (daily)
- **Next Steps**: `Start_Here_Tomorrow_YYYY-MM-DD.md` (daily)

---

## Synapse Agent Commands

| Code | Command | Purpose |
|------|---------|---------|
| DP | data-profile | Validate schema, gaps, distributions, drift |
| BL | baseline-suite | Build strong baselines with tier metrics |
| FS | feature-schema | Engineer features with leakage audits |
| RD | rulebook-draft | Discover symbolic rules with evidence |
| NP | neural-model-prototype | Build calibrated neural scorers |
| HI | hybrid-inference | Combine neural + symbolic reasoning |
| KO | k-optimizer | Choose optimal K under constraints |
| AR | ablation-report | Systematic comparison with conclusions |
| MH | help | Show menu |
| CH | chat | Chat with Synapse |
| DA | exit | Dismiss agent |

---

## Research Workflow Sequence

1. **Data Profiling** → Understand dataset characteristics
2. **Baseline Suite** → Establish performance floor
3. **Feature Schema** → Engineer + audit features
4. **Rulebook Draft** → Discover symbolic rules
5. **Neural Prototype** → Build calibrated scorers
6. **Hybrid Inference** → Integrate neural + symbolic
7. **K Optimizer** → Choose optimal pool size
8. **Ablation Report** → Compare all variants, conclude

**Current Position**: Between steps 1 and 2 (validation pending)

---

## Key Principles (Enforced by Synapse)

1. **Baseline-First**: Never advance complexity without beating simple models
2. **Reproducibility**: Every run logged with seeds, configs, git hashes
3. **Interpretability**: Rule evidence traces, counterfactuals, decision transparency
4. **Tiered Optimization**: Maximize Good-or-better, minimize K, minimize unacceptable
5. **Stability**: Avoid pool thrash unless confidence justifies
6. **Leakage Prevention**: Rigorous feature audits before training

---

## Common Paths

### Agent Activation
```
cd C:\Users\Minis\CascadeProjects\c5_neuro_symbolic
/synapse
```

### Output Artifacts
```
_bmad-output/synapse/{workflow-name}/{run-id}/
├── config.yaml
├── metrics.csv
├── run_log.md
└── plots/
```

### Sidecar Runtime Path
```
{project-root}/_bmad/_memory/synapse-sidecar/
├── instructions.md
├── prd.md
├── pre-run-checklist.md
└── workflows/
```

---

## Known Issues & Watch-Outs

### Sidecar Path Resolution
- **Issue**: YAML uses `{project-root}/_bmad/_memory/synapse-sidecar/` paths
- **Watch**: Ensure paths resolve during activation
- **Status**: Not yet tested (validation pending)

### Workflow Template Adaptation
- **Issue**: Templates provide structure but may need customization
- **Watch**: Python code assumes pandas, matplotlib, scipy
- **Action**: Install dependencies before first workflow

### GPU Cost Management
- **Issue**: H200 expensive if overused
- **Watch**: Follow GPU decision logic in workflow instructions
- **Action**: Start with local PC, escalate to H200 only when justified

---

## Next Session Checklist

**Immediate Tasks** (2026-01-24):
- [ ] Select [C] to continue validation (currently at v-01-load-review menu)
- [ ] Complete all validation steps (v-02a through v-06-report)
- [ ] Review validation report, fix any issues if found
- [ ] Install Synapse agent (full installation via custom module)
- [ ] Push initial git commit to GitHub
- [ ] Activate Synapse: `/synapse`
- [ ] Execute [DP] Data Profiling workflow
- [ ] Review data quality report and artifacts

**Completed** (2026-01-23):
- ✅ Initiated validation workflow
- ✅ Completed v-01-load-review.md (agent loaded, report initialized)
- ✅ Created validation-report-synapse.md

**Expected Outcomes**:
- ✅ Synapse validated (all checks passed or issues fixed)
- ✅ Synapse installed and activatable
- ✅ Git repository initialized with first commit
- ✅ Dataset profiled (gaps, distributions, drift)
- ✅ First research milestone achieved

---

## Success Metrics Reference

### Primary (Research Complete)
- **Good-or-better rate** @K: ≥90%
- **Unacceptable rate** @K: ≤5%
- **Pool size K***: Minimize within [20, 27]

### Secondary (Quality)
- **Stability**: Jaccard ≥0.70
- **Calibration**: ECE <0.10
- **Interpretability**: High-quality rule evidence

---

## Dependencies

### Confirmed Available
- pandas, numpy, matplotlib (standard data science)
- Python environment on local PC
- CA5 dataset (11,685 records)

### Needed Soon
- scipy, scikit-learn (for baselines and calibration)
- torch (for neural models)
- Optional: transformers, networkx, problog

### Install Command
```bash
pip install pandas matplotlib scipy numpy scikit-learn torch
```

---

## Communication Preferences

**User "y" prefers**:
- Concise, structured responses
- Evidence-based recommendations
- Clear next steps / action items
- Numbered lists and checklists
- No time estimates (focus on what, not when)

**Avoid**:
- Excessive praise or validation
- Emojis (unless explicitly requested)
- Vague or ambiguous guidance
- Time predictions

## Technical Implementation Expectations

**CRITICAL**: User is NOT a trained programmer or data scientist

**Agent Responsibilities**:
- ✅ Write all code (Python scripts, notebooks, etc.)
- ✅ Debug issues and fix errors
- ✅ Explain technical decisions in accessible terms
- ✅ Implement algorithms and models
- ✅ Run experiments and analyze results
- ✅ Generate visualizations and reports

**User Responsibilities**:
- ✅ Guide research direction and strategy
- ✅ Make high-level decisions (approaches, priorities)
- ✅ Review results and provide domain context
- ✅ Approve methodologies and conclusions
- ✅ Run commands/scripts prepared by agents

**Working Model**:
- Agent writes complete, runnable code
- User executes code with agent guidance
- Agent interprets results and suggests next steps
- User makes strategic decisions based on agent analysis

---

## Project Timeline Context

**Week 0** (2026-01-21 to 2026-01-22): Infrastructure
- ✅ Dataset obtained, PRD created, agent built

**Week 1-2** (Starting 2026-01-23): Data Understanding
- ⏳ Data profiling, baselines, feature engineering

**Week 3-4**: Neural + Symbolic
- ⏳ Neural models, rule discovery, integration

**Week 5-6**: Optimization
- ⏳ Hybrid inference, K optimization, stability tuning

**Week 7-8**: Evaluation
- ⏳ Ablations, statistical tests, research conclusion

---

## Memory Maintenance Notes

**When to Update**:
- After major decisions (architecture, approach, tools)
- After milestone completions (workflows, phases)
- When new issues or watch-outs identified
- End of each session (sync with summary)

**What to Capture**:
- Key decisions and rationale
- Critical file paths
- Known issues / workarounds
- User preferences discovered
- Success criteria refinements

---

**Memory Last Updated**: 2026-01-23
**Next Update**: After validation completion and data profiling (2026-01-24)
